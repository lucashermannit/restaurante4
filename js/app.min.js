!function(o,s,e){console.log("init");
var n={
    init: function(e){
        n.select2(),
        n.carousel(),
        n.stellar(),
        n.dateTimePicker(),
        n.sideNav()}
    ,select2: function(){
        o(e).ready(
            function(){
                o("#selectPerson").select2({
                    placeholder:"Person",
                    allowClear:!0})
            })
    },
    carousel:function(){
        o(".hero-carousel").owlCarousel({
            loop:!0,
            margin:10,
            nav:!0,
            dots:!1,
            responsive:{
                0:{items:1},
                600:{items:1}
            },
            nav:!0,
            navText:['<span class="lnr lnr-chevron-left"></span>',
            '<span class="lnr lnr-chevron-right"></span>']}),
            o(".testi-carousel").owlCarousel({
                loop:!0,
                margin:10,
                autoplay:!0,
                nav:!1,
                dots:!0,
                dotSpeed:1e3,
                autoplay:!0,
                autoplaySpeed:1e3,
                items:1})},
                stellar: function(){
                    var e=o(s).width();
                    767<=e&&(o(".bg-fixed").attr("data-stellar-background-ratio","0.8"),
                    o.stellar({
                        horizontalScrolling:!1,
                        responsive:!0,
                        parallaxBackgrounds:!0,
                        scrollProperty:"scroll"
                    }))
                },
                dateTimePicker: function(){
                    o("#datetimepicker4").datetimepicker({
                        format:"L"}),
                    o("#datetimepicker3").datetimepicker({
                        format:"LT"})
                    },
                    sideNav: function(){
                        o("#side-nav-open").click(function(){
                            o("#side-nav").css("width","300"),
                            setTimeout(function(){
                                o("body").addClass("sidenav-open")},200),
                            setTimeout(function(){
                                o("body").addClass("in")},400)}),
                                o("#side-nav-close, #canvas-overlay").click(function(){
                                    setTimeout(function(){
                                        o("body").removeClass("in")},200),
                                        setTimeout(function(){
                                            o("body").removeClass("sidenav-open"),
                                            o("#side-nav").css("width","0")},400)}),
                                            o("#side-search-open").click(function(){
                                                o("#side-search").css("width","300"),
                                                setTimeout(function(){
                                                    o("body").addClass("sidesearch-open")},200),
                                                    setTimeout(function(){
                                                        o("body").addClass("in")},300)}),
                                                        o("#side-search-close, #canvas-overlay").click(function(){
                                                            setTimeout(function(){
                                                                o("body").removeClass("in")},200),
                                                                setTimeout(function(){
                                                                    o("body").removeClass("sidesearch-open"),
                                                                    o("#side-search").css("width","0")},300)})}};
                                                                    o(e).ready(function(){
                                                                        n.init(o)})}(window.jQuery,window,document);


// FUNCIONES DE MENU AGREGADO - Quizas poner todas las funciones y demas dentro del segundo ".then" no es lo mejor
var entrada = 0
var principal = 1
var postre = 2
var bebida = 3

let slideIndex = 0;
let slideIndex2 = 0;
let slideIndex3 = 0;
let slideIndex4 = 0;
fetch('https://run.mocky.io/v3/2ab15c91-c1ca-4ed9-862b-46988b5cb5e2')
.then( res => res.text() )
.then( datos => {
    menu = JSON.parse(datos)

    categoriasMenu = Object.getOwnPropertyNames(menu) // Array con las categorias del menu: "entrada", "principal", "postre", "bebida"
    
    for(opcion in categoriasMenu) {
        var categoriaPlato = categoriasMenu[opcion]
        var numeroPlato = 1 // Contador para poner "1. nombrePlatoRico"
        var itemCategoria = 'item-' + categoriaPlato
        var slideCategoria = 'slide-' + categoriaPlato
        var menuItem = document.getElementById(itemCategoria)
        var slideMenu = document.getElementById(slideCategoria)
        for(plato in menu[categoriaPlato]) {
            insertarPlato(menu[categoriaPlato][plato], numeroPlato)
            insertarFotosMenu(menu[categoriaPlato][plato], numeroPlato)
            numeroPlato = numeroPlato + 1
        }
    }
    mostrarFotosMenu()
    mostrarFotosMenu2()
    mostrarFotosMenu3()
    mostrarFotosMenu4()
    
    function insertarPlato(plato, numero) {
        menuItem.insertAdjacentHTML('beforebegin', `
            <div class="menu-item">
                <div class="menu-img">
                    <img src="img/menu/${categoriaPlato}/${numero}.jpg" alt="Image">
                </div>
                <div class="menu-text">
                    <h3><span>${numero}. ${plato.nombre}</span> <strong>$${plato.precio}</strong></h3>
                    <p>${plato.descripcion}</p>
                </div>
            </div>`)
    }
    
    function insertarFotosMenu(plato, numero) {
        var slideCategoria = 'slide-' + categoriaPlato
        var fotoMenu = 'fotoMenu-' + categoriaPlato
        slideMenu.insertAdjacentHTML('beforeend', `
            <div class="mySlides fade ${fotoMenu} ${slideCategoria}">
                <img src="img/menu/${categoriaPlato}/${numero}.jpg" style="width:100%">
                <div class="text-align-center">${numero}. ${plato.nombre}</div>
            </div>`)
    }
    
    /* arreglar esta parte de los "mostrarFotoMenu - CORECCION PARA SACARLO RAPIDO ANDANDO */
    function mostrarFotosMenu() {        
        let i;
        let slides = document.getElementsByClassName("slide-entrada"); // Aca ver de armar slidesCategoria asi toma slides.length
        let dots = document.getElementsByClassName("fotoMenu-entrada");
        
        for (i = 0; i < slides.length; i++) {
            slides[i].style.display = "none";  
        }
        slideIndex++;
        if (slideIndex > slides.length) {slideIndex = 1}    
        for (i = 0; i < dots.length; i++) {
            dots[i].className = dots[i].className.replace(" active", "");
        }
        slides[slideIndex-1].style.display = "block";  
        dots[slideIndex-1].className += " active";
        setTimeout(mostrarFotosMenu, 2000); // Change image every 2 seconds
    }
    function mostrarFotosMenu2() {
        let i;
        let slides = document.getElementsByClassName("slide-principal"); // Aca ver de armar slidesCategoria asi toma slides.length
        let dots = document.getElementsByClassName("fotoMenu-principal");
        
        for (i = 0; i < slides.length; i++) {
            slides[i].style.display = "none";  
        }
        slideIndex2++;
        if (slideIndex2 > slides.length) {slideIndex2 = 1}    
        for (i = 0; i < dots.length; i++) {
            dots[i].className = dots[i].className.replace(" active", "");
        }
        slides[slideIndex2-1].style.display = "block";  
        dots[slideIndex2-1].className += " active";
        setTimeout(mostrarFotosMenu2, 2000); // Change image every 2 seconds
    }
    function mostrarFotosMenu3() {
        let i;
        let slides = document.getElementsByClassName("slide-postre"); // Aca ver de armar slidesCategoria asi toma slides.length
        let dots = document.getElementsByClassName("fotoMenu-postre");
        
        for (i = 0; i < slides.length; i++) {
            slides[i].style.display = "none";  
        }
        slideIndex3++;
        if (slideIndex3 > slides.length) {slideIndex3 = 1}    
        for (i = 0; i < dots.length; i++) {
            dots[i].className = dots[i].className.replace(" active", "");
        }
        slides[slideIndex3-1].style.display = "block";  
        dots[slideIndex3-1].className += " active";
        setTimeout(mostrarFotosMenu3, 2000); // Change image every 2 seconds
    }
    function mostrarFotosMenu4() {
        let i;
        let slides = document.getElementsByClassName("slide-bebida"); // Aca ver de armar slidesCategoria asi toma slides.length
        let dots = document.getElementsByClassName("fotoMenu-bebida");
        
        for (i = 0; i < slides.length; i++) {
            slides[i].style.display = "none";  
        }
        slideIndex4++;
        if (slideIndex4 > slides.length) {slideIndex4 = 1}    
        for (i = 0; i < dots.length; i++) {
            dots[i].className = dots[i].className.replace(" active", "");
        }
        slides[slideIndex4-1].style.display = "block";  
        dots[slideIndex4-1].className += " active";
        setTimeout(mostrarFotosMenu4, 2000); // Change image every 2 seconds
    }
})